<main>

   <div
    class="page-banner-area ptb-100 mt-5"
    style="background-image: url(../../../../assets/images/page-banner-bg.jpg)"
  >
    <div class="container">
      <div class="page-banner-content">
        <div class="list d-sm-flex align-items-center">
          <div class="list-item d-block position-relative">
            <div class="d-flex align-items-center">
              <!-- <img
                src="../../../../assets/images/users/user1.jpg"
                width="30"
                alt="user"
                class="rounded-circle"
              /> -->
              {{courseDetails[0].instructor_name}}
             </div>
          </div>
          <div class="list-item d-inline-block position-relative">{{courseDetails[0].category_name}}</div>
          <div class="list-item d-inline-block position-relative">
            <i class="bx bxs-star"></i> {{calcRate()}} (<a href="#reviews">{{courseDetails[0].positive_count + courseDetails[0].negative_count + courseDetails[0].neutral_count}} Reviews</a>)
          </div>
        </div>
        <h1> {{courseDetails[0].name}}</h1>
        <ul class="ps-0 mb-0 list-unstyled">
          <li class="d-inline-block position-relative">
            <a routerlink="/" href="/">Home</a>
          </li>
          <li class="d-inline-block position-relative">Course Details</li>
        </ul>
      </div>
    </div>
  </div>
  <div class="course-details-area ptb-100">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-12">
          <div class="course-details-desc">
            <ul class="nav nav-tabs d-block">
              <li
                class="nav-item d-inline-block"
                [ngClass]="{ activated: currentSection === 'overview' }"
                (click)="toggleSection('overview')"
              >
                <button
                  type="button"
                  class="nav-link position-relative shadow-none border-0 mb-0 rounded-0"
                >
                  Overview
                </button>
              </li>
              <li
                class="nav-item d-inline-block"
                [ngClass]="{ activated: currentSection === 'content' }"
                (click)="toggleSection('content')"
              >
                <button
                  type="button"
                  class="nav-link position-relative shadow-none border-0 mb-0 rounded-0"
                >
                  Course Content
                </button>
              </li>
              <li
                class="nav-item d-inline-block"
                [ngClass]="{ activated: currentSection === 'reviews' }"
                (click)="toggleSection('reviews')"
              >
                <button
                  type="button"
                  class="nav-link position-relative shadow-none border-0 mb-0 rounded-0"
                >
                  Reviews
                </button>
              </li>
            </ul>

            <div>
              <div>
                <div
                  id="overview"
                  class="desc"
                  [hidden]="
                    currentSection !== 'overview' && currentSection !== 'not'
                  "
                >
                  <h2 text>Description</h2>
                  <p>
                    {{courseDetails[0].description}}
                  </p>
                </div>

                <div
                  id="content"
                  class="course-details-content"
                  [hidden]="
                    currentSection !== 'content' && currentSection !== 'not'
                  "
                >
                  <h2>Course Content</h2>
                  <div class="accordion">
                    <div class="accordion-section">
                      <div
                        class="accordion-header"
                        (click)="isCollapsed = !isCollapsed"
                        [attr.aria-expanded]="!isCollapsed"
                        aria-controls="collapseExample"
                      >
                        Course Overview <span>5 lectures • 19min</span>
                      </div>
                      <div
                        class="accordion-content"
                        #collapse="ngbCollapse"
                        [(ngbCollapse)]="isCollapsed"
                      >
                        <ul class="ps-0 mb-0 list-unstyled">
                          <li
                            ngbDropdownItem
                            class="d-sm-flex align-items-center justify-content-between"
                          >
                            Welcome to the Complete Python Bootcamp
                            <span><i class="bx bx-lock-alt"></i> • 00:44</span>
                          </li>
                          <li
                            ngbDropdownItem
                            class="d-sm-flex align-items-center justify-content-between"
                          >
                            The Complete Python Bootcamp
                            <span><i class="bx bx-lock-alt"></i> • 06:39</span>
                          </li>
                          <li
                            ngbDropdownItem
                            class="d-sm-flex align-items-center justify-content-between"
                          >
                            Course Curriculum Overview
                            <span><i class="bx bx-lock-alt"></i> • 04:00</span>
                          </li>
                          <li
                            ngbDropdownItem
                            class="d-sm-flex align-items-center justify-content-between"
                          >
                            Why Python?
                            <span><i class="bx bx-lock-alt"></i> • 05:17</span>
                          </li>
                          <li
                            ngbDropdownItem
                            class="d-sm-flex align-items-center justify-content-between"
                          >
                            Course FAQs
                            <span><i class="bx bx-lock-alt"></i> • 02:33</span>
                          </li>
                        </ul>
                      </div>
                    </div>
                    <div class="accordion-section">
                      <div
                        class="accordion-header"
                        (click)="isCollapsed = !isCollapsed"
                        [attr.aria-expanded]="!isCollapsed"
                        aria-controls="collapseExample"
                      >
                        Course Overview <span>5 lectures • 19min</span>
                      </div>
                      <div
                        class="accordion-content"
                        #collapse="ngbCollapse"
                        [(ngbCollapse)]="isCollapsed"
                      >
                        <ul class="ps-0 mb-0 list-unstyled">
                          <li
                            ngbDropdownItem
                            class="d-sm-flex align-items-center justify-content-between"
                          >
                            Welcome to the Complete Python Bootcamp
                            <span><i class="bx bx-lock-alt"></i> • 00:44</span>
                          </li>
                          <li
                            ngbDropdownItem
                            class="d-sm-flex align-items-center justify-content-between"
                          >
                            The Complete Python Bootcamp
                            <span><i class="bx bx-lock-alt"></i> • 06:39</span>
                          </li>
                          <li
                            ngbDropdownItem
                            class="d-sm-flex align-items-center justify-content-between"
                          >
                            Course Curriculum Overview
                            <span><i class="bx bx-lock-alt"></i> • 04:00</span>
                          </li>
                          <li
                            ngbDropdownItem
                            class="d-sm-flex align-items-center justify-content-between"
                          >
                            Why Python?
                            <span><i class="bx bx-lock-alt"></i> • 05:17</span>
                          </li>
                          <li
                            ngbDropdownItem
                            class="d-sm-flex align-items-center justify-content-between"
                          >
                            Course FAQs
                            <span><i class="bx bx-lock-alt"></i> • 02:33</span>
                          </li>
                        </ul>
                      </div>
                    </div>
                    <div class="accordion-section">
                      <div
                        class="accordion-header"
                        (click)="isCollapsed = !isCollapsed"
                        [attr.aria-expanded]="!isCollapsed"
                        aria-controls="collapseExample"
                      >
                        Course Overview <span>5 lectures • 19min</span>
                      </div>
                      <div
                        class="accordion-content"
                        #collapse="ngbCollapse"
                        [(ngbCollapse)]="isCollapsed"
                      >
                        <ul class="ps-0 mb-0 list-unstyled">
                          <li
                            ngbDropdownItem
                            class="d-sm-flex align-items-center justify-content-between"
                          >
                            Welcome to the Complete Python Bootcamp
                            <span><i class="bx bx-lock-alt"></i> • 00:44</span>
                          </li>
                          <li
                            ngbDropdownItem
                            class="d-sm-flex align-items-center justify-content-between"
                          >
                            The Complete Python Bootcamp
                            <span><i class="bx bx-lock-alt"></i> • 06:39</span>
                          </li>
                          <li
                            ngbDropdownItem
                            class="d-sm-flex align-items-center justify-content-between"
                          >
                            Course Curriculum Overview
                            <span><i class="bx bx-lock-alt"></i> • 04:00</span>
                          </li>
                          <li
                            ngbDropdownItem
                            class="d-sm-flex align-items-center justify-content-between"
                          >
                            Why Python?
                            <span><i class="bx bx-lock-alt"></i> • 05:17</span>
                          </li>
                          <li
                            ngbDropdownItem
                            class="d-sm-flex align-items-center justify-content-between"
                          >
                            Course FAQs
                            <span><i class="bx bx-lock-alt"></i> • 02:33</span>
                          </li>
                        </ul>
                      </div>
                    </div>
                    <div class="accordion-section">
                      <div
                        class="accordion-header"
                        (click)="isCollapsed = !isCollapsed"
                        [attr.aria-expanded]="!isCollapsed"
                        aria-controls="collapseExample"
                      >
                        Course Overview <span>5 lectures • 19min</span>
                      </div>
                      <div
                        class="accordion-content"
                        #collapse="ngbCollapse"
                        [(ngbCollapse)]="isCollapsed"
                      >
                        <ul class="ps-0 mb-0 list-unstyled">
                          <li
                            ngbDropdownItem
                            class="d-sm-flex align-items-center justify-content-between"
                          >
                            Welcome to the Complete Python Bootcamp
                            <span><i class="bx bx-lock-alt"></i> • 00:44</span>
                          </li>
                          <li
                            ngbDropdownItem
                            class="d-sm-flex align-items-center justify-content-between"
                          >
                            The Complete Python Bootcamp
                            <span><i class="bx bx-lock-alt"></i> • 06:39</span>
                          </li>
                          <li
                            ngbDropdownItem
                            class="d-sm-flex align-items-center justify-content-between"
                          >
                            Course Curriculum Overview
                            <span><i class="bx bx-lock-alt"></i> • 04:00</span>
                          </li>
                          <li
                            ngbDropdownItem
                            class="d-sm-flex align-items-center justify-content-between"
                          >
                            Why Python?
                            <span><i class="bx bx-lock-alt"></i> • 05:17</span>
                          </li>
                          <li
                            ngbDropdownItem
                            class="d-sm-flex align-items-center justify-content-between"
                          >
                            Course FAQs
                            <span><i class="bx bx-lock-alt"></i> • 02:33</span>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>

                <div
                  id="reviews"
                  [hidden]="
                    currentSection !== 'reviews' && currentSection !== 'not'
                  "
                  class="course-details-feedback"
                >
                  <h2>Student's feedback</h2>
                  <div class="row align-items-center overflow-hidden">
                    <div class="col-lg-4 col-md-4">
                      <div class="content text-center">
                        <h1>{{calcRate()}}</h1>
                        <div class="rating">
                          <i class="bx" [ngClass]="{ 'bxs-star': calcRate() >= 1, 'bx-star': calcRate() < 1 }"></i>
                          <i class="bx" [ngClass]="{ 'bxs-star': calcRate() >= 2, 'bx-star': calcRate() < 2 }"></i>
                          <i class="bx" [ngClass]="{ 'bxs-star': calcRate() >= 3, 'bx-star': calcRate() < 3 }"></i>
                          <i class="bx" [ngClass]="{ 'bxs-star': calcRate() >= 4, 'bx-star': calcRate() < 4 }"></i>
                          <i class="bx" [ngClass]="{ 'bxs-star': calcRate() >= 5, 'bx-star': calcRate() < 5 }"></i>
                        </div>
                        <span class="d-block">Course Rating</span>
                      </div>
                    </div>
                    <div class="col-lg-8 col-md-8">
                      <div class="rating-content">
                        <div class="item d-flex align-items-center">
                          <div class="w-70">
                            <div
                              role="progressbar"
                              aria-label="Basic example"
                              aria-valuenow="70"
                              aria-valuemin="0"
                              aria-valuemax="100"
                              class="progress"
                            >
                              <div
                                class="progress-bar"
                                [style.width.%]="CalcPercentage(courseDetails[0].positive_count)"
                               ></div>
                            </div>
                          </div>
                          <div class="rating">
                            <i class="bx bxs-star"></i
                            ><i class="bx bxs-star"></i
                            ><i class="bx bxs-star"></i
                            ><i class="bx bxs-star"></i
                            ><i class="bx bxs-star"></i>
                          </div>
                          <span>{{CalcPercentage(courseDetails[0].positive_count)}}%</span>
                        </div>
                        <div class="item d-flex align-items-center">
                          <div class="w-70">
                            <div
                              role="progressbar"
                              aria-label="Basic example"
                              aria-valuenow="20"
                              aria-valuemin="0"
                              aria-valuemax="100"
                              class="progress"
                            >
                              <div
                                class="progress-bar"
                                [style.width.%]="CalcPercentage(courseDetails[0].neutral_count)+1"
                              ></div>
                            </div>
                          </div>
                          <div class="rating">
                            <i class="bx bxs-star"></i
                            ><i class="bx bxs-star"></i
                            ><i class="bx bxs-star"></i
                            ><i class="bx bx-star"></i
                            ><i class="bx bx-star"></i>
                          </div>
                          <span>{{CalcPercentage(courseDetails[0].neutral_count)}}%</span>
                        </div>
                        <div class="item d-flex align-items-center">
                          <div class="w-70">
                            <div
                              role="progressbar"
                              aria-label="Basic example"
                              aria-valuenow="10"
                              aria-valuemin="0"
                              aria-valuemax="100"
                              class="progress"
                            >
                              <div
                                class="progress-bar"
                                [style.width.%]="CalcPercentage(courseDetails[0].negative_count)"
                              ></div>
                            </div>
                          </div>
                          <div class="rating">
                            <i class="bx bxs-star"></i
                            ><i class="bx bx-star"></i
                            ><i class="bx bx-star"></i
                            ><i class="bx bx-star"></i
                            ><i class="bx bx-star"></i>
                          </div>
                          <span>{{CalcPercentage(courseDetails[0].negative_count)}}%</span>
                        </div>
                      </div>
                    </div>
                  </div>
                  <hr />
                  <div class="feedback-list">
                    <app-slider [Comments]="courseReviews"></app-slider>
                  </div>

                  <div class="course-details-write-review my-3">
                    <h2>Write a Review</h2>
                    <p>What is it like to Course?</p>
                    <form
                      [formGroup]="commentForm"
                      (ngSubmit)="submitComment()"
                      class="ng-untouched ng-pristine ng-valid"
                    >
                      <div
                        class="rating"
                        style="font-size: x-large; color: orange; margin: 20px"
                      >
                        <ngb-rating
                          class="m-0 p-0 ngb-rating"
                          [(rate)]="selected"
                          [readonly]="readonly"
                        >
                        </ngb-rating>
                      </div>
                      <div class="form-group">
                        <textarea
                          formControlName="comment"
                          cols="30"
                          rows="3"
                          placeholder="Message..."
                          class="form-control"
                        ></textarea>
                      </div>
                      <button type="submit" class="default-btn my-2">
                        Submit Review
                      </button>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-4 col-md-12">
          <div class="course-details-info">
            <app-course-card [id]="courseDetails[0].id" [title]="courseDetails[0].name" [image]="courseDetails[0].cover" [category]="courseDetails[0].category_name" [description]="courseDetails[0].description" [instructor]="courseDetails[0].instructor_name" [numOfStudents]="courseDetails[0].user_count" [numOfReviews]="courseDetails[0].user_count" [Rate]="calcRate()" [showEnroll]="!userData.type"></app-course-card>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- <section
    class="d-flex flex-row gap-2 justify-content-between"
    style="height: 100%"
  >
    <aside
      class="col-4 d-flex flex-column bg py-2 overflow-auto pos-fixed fixed"
      style="height: 90vh"
    >
      <div class="card-body py-0" *ngFor="let week of contentByWeek">
        <div class="flex-row">
          <div class="col-sm-12">
            <p class="mb-0 text-sm-center">
              <a class="hiphop_text"> Week : {{ week.week }}</a>
            </p>
          </div>
          <div *ngFor="let item of week.items">
            <div class="col-sm-12 d-flex flex-row justify-content-between">
              <p>
                <i class="fa-regular fa-file-pdf"></i>
                <a class="mx-1" (click)="createComponent('Ahmed.pdf')">{{
                  item.pdf
                }}</a>
              </p>
              <a
                style="
                  text-decoration: underline !important;
                  color: blue;
                  height: 20px;
                  align-self: center;
                "
                href="#"
                >Summary</a
              >
            </div>
            <div class="col-sm-12 d-flex flex-row justify-content-between">
              <p>
                <i class="fa-solid fa-video"></i>
                <a class="mx-1" (click)="createComponent('kTgyVW3WIAs')"
                  >{{ item.video }}
                </a>
              </p>
              <a
                style="
                  text-decoration: underline !important;
                  color: blue;
                  height: 20px;
                  align-self: center;
                "
                href="#"
                >Summary</a
              >
            </div>
          </div>
        </div>
        <hr />
      </div>
    </aside>
    <div class="align-self-center my-2 w-100">
      <ng-container class="col-8" #container> </ng-container>
    </div>
  </section>
  <hr class="m-0 p-0" />

  <section class="d-flex flex-row gap-2">
    <div
      class="reviews col-8 overflow-auto"
      style="height: 100%; padding-right: 30px"
    >
      <h2 class="text-center">Course Reviews</h2>
      <table class="table bg">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">User Name</th>
            <th scope="col">Comment</th>
            <th scope="col">Rate</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let review of courseReviews; let i = index">
            <th scope="row">{{ i + 1 }}</th>
            <td>{{ review.user_name }}</td>
            <td>{{ review.comment }}</td>
            <td>{{ review.rating }}</td>
          </tr>
        </tbody>
      </table>
      <table class="table bg">
        <thead>
          <tr>
            <th class="col-6">New Comment</th>
            <th scope="col">Rate</th>
            <th scope="col">Post</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>
              <input
                type="text"
                class="p-1 w-100 comment"
                placeholder="Enter your Comment"
              />
            </td>
            <td>
              <input
                class="comment px-2"
                type="number"
                value="1"
                min="1"
                max="5"
              />
            </td>
            <td>
              <a
                class="badge"
                style="background: floralwhite; color: gray"
                href="#"
              >
                Submit</a
              >
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </section> -->
</main>
